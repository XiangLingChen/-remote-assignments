<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>ajax test</title>
        
        <script>
            function ajax(src, callback){
                var xmlhttp = new XMLHttpRequest();

                url = "https://cwpeng.github.io/live-records-samples/data/products.json";
                xmlhttp.onreadystatechange = function() {
                    callback("123456");
                    callback(xmlhttp.responseText);
                    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                        alert(xmlhttp.responseText);
                        //callback(xmlhttp.responseText);
                    }
                }
                xmlhttp.open("GET", url, true);
                xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");
                xmlhttp.setRequestHeader('content-type', 'application/json');
                xmlhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
                xmlhttp.send();
            }
            function render(data){
                var newDiv = document.createElement("div"); 
                var newContent = document.createTextNode(data); 
                newDiv.appendChild(newContent); //add the text node to the newly created div. 

                // add the newly created element and its content into the DOM 
                var currentDiv = document.getElementById("div1"); 
                document.body.insertBefore(newDiv, currentDiv);
            }
            ajax("https://cwpeng.github.io/live-records-samples/data/products.json", function(response){
                render(response);
            }); // you should get product information in JSON format and render data in the page    
        </script>
    </head>
    <body>
        <div id="div1">The text above has been created dynamically.</div>
    </body>
</html>


